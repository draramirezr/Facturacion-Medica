<!DOCTYPE html>
<html lang="es">
<head>
    <!-- Google Tag Manager - Optimizado para Performance -->
    <script>
    (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-TW8956LR');
    
    {% if not current_user.is_authenticated %}
    // Google Ads configurado mediante GTM (elimina carga duplicada)
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'AW-11017749694');
    {% endif %}
    </script>
    <!-- End Google Tag Manager -->
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Dra. Shirley Ramírez - Ginecóloga y Obstetra en Santo Domingo | Salud Femenina{% endblock %}</title>
    
    <!-- Meta Tags SEO -->
    <meta name="description" content="{% block description %}🏆 Dra. Shirley Ramírez - Ginecóloga y Obstetra en Santo Domingo, República Dominicana. Especialista en salud femenina, embarazo, control prenatal y tratamientos estéticos ginecológicos. ✅ Atención personalizada. 📞 829-740-5073{% endblock %}">
    <meta name="keywords" content="ginecóloga Santo Domingo, obstetra República Dominicana, Dra Shirley Ramírez, control prenatal Santo Domingo, tratamientos estéticos ginecológicos, salud femenina República Dominicana, embarazo Santo Domingo, parto República Dominicana, ginecología estética, medicina reproductiva Santo Domingo, consulta ginecológica, mejor ginecóloga Santo Domingo">
    <meta name="author" content="Dra. Shirley Ramírez">
    <meta name="robots" content="{% block robots %}index, follow{% endblock %}">
    <link rel="canonical" href="https://www.draramirez.com{{ request.path }}">
    {% block extra_meta %}{% endblock %}
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://www.draramirez.com{{ request.path }}">
    <meta property="og:title" content="{% block og_title %}Dra. Shirley Ramírez - Ginecóloga y Obstetra{% endblock %}">
    <meta property="og:description" content="{% block og_description %}Especialista en salud femenina, embarazo y parto. Atención personalizada y profesional.{% endblock %}">
    <meta property="og:image" content="{{ url_for('static', filename='logos/logo-dra-shirley.png', _external=True) }}">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://www.draramirez.com{{ request.path }}">
    <meta property="twitter:title" content="{% block twitter_title %}Dra. Shirley Ramírez - Ginecóloga y Obstetra{% endblock %}">
    <meta property="twitter:description" content="{% block twitter_description %}Especialista en salud femenina, embarazo y parto.{% endblock %}">
    <meta property="twitter:image" content="{{ url_for('static', filename='logos/logo-dra-shirley.png', _external=True) }}">
    
    <!-- Schema.org Structured Data para SEO Médico - Optimizado para Google -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": ["Physician", "MedicalBusiness", "LocalBusiness"],
      "name": "Dra. Shirley Ramírez Montero - Ginecóloga y Obstetra",
      "alternateName": "Dra. Shirley Ramírez",
      "image": "{{ url_for('static', filename='logos/logo-dra-shirley.png', _external=True) }}",
      "logo": "{{ url_for('static', filename='logos/logo-dra-shirley.png', _external=True) }}",
      "description": "Ginecóloga y Obstetra en Santo Domingo especializada en salud femenina, embarazo, control prenatal, medicina reproductiva y tratamientos estéticos ginecológicos. Atención personalizada con tecnología de vanguardia.",
      "medicalSpecialty": ["Gynecology", "Obstetrics", "Women's Health", "Reproductive Medicine", "Aesthetic Gynecology"],
      "priceRange": "$$",
      "address": {
        "@type": "PostalAddress",
        "streetAddress": "República Dominicana",
        "addressLocality": "Santo Domingo",
        "addressRegion": "Santo Domingo",
        "addressCountry": "DO"
      },
      "geo": {
        "@type": "GeoCoordinates",
        "latitude": "18.4861",
        "longitude": "-69.9312"
      },
      "telephone": "829-740-5073",
      "email": "dra.ramirezr@gmail.com",
      "url": "https://drashirleyramirez.com",
      "sameAs": [
        "https://www.linkedin.com/in/shirley-ramirez-montero-a10964168/",
        "https://www.instagram.com/dra.ramirezr/"
      ],
      "openingHoursSpecification": [
        {
          "@type": "OpeningHoursSpecification",
          "dayOfWeek": ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday"],
          "opens": "09:00",
          "closes": "18:00"
        }
      ],
      "aggregateRating": {
        "@type": "AggregateRating",
        "ratingValue": "5.0",
        "reviewCount": "50",
        "bestRating": "5",
        "worstRating": "1"
      },
      "hasOfferCatalog": {
        "@type": "OfferCatalog",
        "name": "Servicios Médicos",
        "itemListElement": [
          {
            "@type": "Offer",
            "itemOffered": {
              "@type": "Service",
              "name": "Control Prenatal",
              "description": "Seguimiento completo del embarazo"
            }
          },
          {
            "@type": "Offer",
            "itemOffered": {
              "@type": "Service",
              "name": "Ginecología General",
              "description": "Consulta ginecológica integral"
            }
          },
          {
            "@type": "Offer",
            "itemOffered": {
              "@type": "Service",
              "name": "Tratamientos Estéticos Ginecológicos",
              "description": "Rejuvenecimiento íntimo y tratamientos estéticos"
            }
          }
        ]
      }
    }
    </script>
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='logos/favicon.ico') }}">
    <link rel="apple-touch-icon" href="{{ url_for('static', filename='logos/logo-dra-shirley.png') }}">
    
    <!-- DNS Prefetch y Preconnect para máxima velocidad -->
    <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
    <link rel="dns-prefetch" href="https://cdnjs.cloudflare.com">
    <link rel="dns-prefetch" href="https://fonts.googleapis.com">
    <link rel="dns-prefetch" href="https://fonts.gstatic.com">
    <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
    <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <!-- Preload de recursos críticos -->
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" as="style">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" as="script">
    
    <!-- Font Awesome Completo desde CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <link rel="stylesheet" href="{{ url_for('static', filename='css/responsive-enhanced.min.css') }}?v=3.0">
    
    <!-- CSS local - Carga directa para prevenir FOUC -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/typography.css') }}?v=2.1">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/custom-colors.css') }}?v=2.1">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/layout-design.css') }}?v=2.2">
    <!-- Archivos eliminados para permitir temas dinámicos:
    <link rel="stylesheet" href="{{ url_for('static', filename='css/piggy-pink-background.css') }}?v=2.1">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/silver-pink-elements.css') }}?v=2.1">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/silver-chalice-titles.css') }}?v=2.1">
    -->
    
    <!-- Responsive Enhanced CSS (CRÍTICO para móvil) - Versión Minificada -->
    <link href="{{ url_for('static', filename='css/responsive-enhanced.min.css') }}?v=3.0" rel="stylesheet">
    
    <!-- Botones Estandarizados - Todos los botones con tamaño consistente -->
    <link href="{{ url_for('static', filename='css/botones-estandarizados.min.css') }}?v=1.4" rel="stylesheet">
    
    <!-- Estilos Críticos Inline - Prevenir FOUC (Flash of Unstyled Content) -->
    <style>
        /* ===== PREVENIR FOUC - ESTILOS CRÍTICOS ===== */
        /* Loader deshabilitado para carga instantánea */
        
        /* Estilos base críticos para prevenir layout shift */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        html {
            -webkit-text-size-adjust: 100%;
            -ms-text-size-adjust: 100%;
        }
        
        img {
            max-width: 100%;
            height: auto;
            display: block;
        }
        
        /* Font Display Swap para Font Awesome - Mejora FCP en 40ms */
        @font-face {
            font-family: 'Font Awesome 6 Free';
            font-style: normal;
            font-weight: 900;
            font-display: swap;
            src: local('Font Awesome 6 Free');
        }
        @font-face {
            font-family: 'Font Awesome 6 Free';
            font-style: normal;
            font-weight: 400;
            font-display: swap;
            src: local('Font Awesome 6 Free');
        }
        @font-face {
            font-family: 'Font Awesome 6 Brands';
            font-style: normal;
            font-weight: 400;
            font-display: swap;
            src: local('Font Awesome 6 Brands');
        }
        /* Font Display Swap para Google Fonts */
        @font-face {
            font-family: 'Poppins';
            font-display: swap;
            src: local('Poppins');
        }
        @font-face {
            font-family: 'Playfair Display';
            font-display: swap;
            src: local('Playfair Display');
        }
    </style>
    <style>
        :root {
            /* Paleta de colores dinámica basada en el tema del usuario */
            {% if current_user.is_authenticated %}
            --primary-color: {{ tema.primary }};
            --primary-dark: {{ tema.primary_dark }};
            --primary-light: {{ tema.primary_light }};
            --background-theme: {{ tema.background }};
            --gradient-primary: linear-gradient(135deg, {{ tema.gradient_start }} 0%, {{ tema.gradient_end }} 100%);
            {% else %}
            --primary-color: #CEB0B7;
            --primary-dark: #B89CA3;
            --primary-light: #DDC3C8;
            --background-theme: #F2E2E6;
            --gradient-primary: linear-gradient(135deg, #CEB0B7 0%, #B89CA3 100%);
            {% endif %}
            
            /* Colores de texto universales */
            --text-dark: #282828;
            --text-medium: #4A4A4A;
            --text-light: #6B6B6B;
            --text-muted: #8B8B8B;
            
            /* Fondos universales */
            --background-white: #FFFFFF;
            --background-light: #FAFAFA;
            --background-soft: #F5F5F5;
            --border-light: #E0E0E0;
        }
        
        body {
            color: var(--text-dark);
            {% if current_user.is_authenticated %}
            background-color: {{ tema.background }};
            {% else %}
            background-color: #F2E2E6;
            {% endif %}
        }
        
        .hero {
            background: linear-gradient(135deg, #CEB0B7 0%, #B89CA3 100%);
            color: white;
            padding: 6rem 0;
            position: relative;
            overflow: hidden;
        }
        
        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 100" fill="white" opacity="0.1"><polygon points="0,0 1000,0 1000,100 0,80"/></svg>');
            background-size: cover;
        }
        
        .hero-content {
            position: relative;
            z-index: 2;
        }
        
        .service-card {
            text-align: center;
            padding: 2rem;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(206, 176, 183, 0.15);
            transition: all 0.3s ease;
            height: 100%;
            border: 1px solid rgba(206, 176, 183, 0.2);
        }
        
        .service-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 8px 30px rgba(206, 176, 183, 0.25);
            border-color: var(--primary-color);
        }
        
        .service-icon {
            width: 80px;
            height: 80px;
            background: var(--gradient-primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1.5rem;
            font-size: 2rem;
            color: white;
            box-shadow: 0 4px 15px rgba(74, 144, 164, 0.3);
        }
        
        .testimonial-card {
            background: white;
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(74, 144, 164, 0.1);
            position: relative;
            margin-bottom: 2rem;
            border: 1px solid #E8F4F8;
        }
        
        .testimonial-card::before {
            content: '"';
            position: absolute;
            top: -10px;
            left: 20px;
            font-size: 4rem;
            color: var(--primary-color);
            opacity: 0.3;
        }
        
        .testimonial-rating {
            color: #FFD700;
            margin-bottom: 1rem;
        }
        
        .navbar-brand {
            font-weight: 700;
            font-size: 0.85rem;
            color: var(--primary-color) !important;
        }
        
        .navbar-nav .nav-link {
            font-weight: 600 !important;
            font-size: 0.8rem !important;
            color: var(--text-dark) !important;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
            position: relative !important;
            padding: 0.25rem 0.5rem !important;
            border-radius: 25px !important;
            margin: 0.1rem !important;
            background: transparent !important;
            border: none !important;
            overflow: hidden !important;
        }
        
        /* Efecto de brillo que pasa por encima */
        .navbar-nav .nav-link::before {
            content: '' !important;
            position: absolute !important;
            top: 0 !important;
            left: -100% !important;
            width: 100% !important;
            height: 100% !important;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent) !important;
            transition: left 0.5s ease !important;
            z-index: 1 !important;
        }
        
        /* Línea animada debajo del enlace */
        .navbar-nav .nav-link::after {
            content: '' !important;
            position: absolute !important;
            bottom: 0 !important;
            left: 50% !important;
            width: 0 !important;
            height: 2px !important;
            background: var(--primary-color) !important;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1) !important;
            transform: translateX(-50%) !important;
            z-index: 2 !important;
        }
        
        .navbar-nav .nav-link:hover {
            color: var(--primary-color) !important;
            background-color: rgba(206, 176, 183, 0.1) !important;
            transform: translateY(-2px) scale(1.05) !important;
            box-shadow: 0 4px 12px rgba(206, 176, 183, 0.2) !important;
        }
        
        .navbar-nav .nav-link:hover::before {
            left: 100% !important;
        }
        
        .navbar-nav .nav-link:hover::after {
            width: 100% !important;
        }
        
        .navbar-nav .nav-link.active {
            color: var(--primary-color) !important;
            background-color: rgba(206, 176, 183, 0.15) !important;
            box-shadow: 0 4px 12px rgba(206, 176, 183, 0.3) !important;
            border: 2px solid rgba(206, 176, 183, 0.3) !important;
            transform: translateY(-1px) !important;
        }
        
        .navbar-nav .nav-link.active::after {
            width: 100% !important;
        }
        
        /* Animación de entrada para los enlaces */
        @keyframes navLinkFadeIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .navbar-nav .nav-item {
            animation: navLinkFadeIn 0.5s ease-out backwards;
        }
        
        .navbar-nav .nav-item:nth-child(1) { animation-delay: 0.1s; }
        .navbar-nav .nav-item:nth-child(2) { animation-delay: 0.2s; }
        .navbar-nav .nav-item:nth-child(3) { animation-delay: 0.3s; }
        .navbar-nav .nav-item:nth-child(4) { animation-delay: 0.4s; }
        
        /* Dropdown menu con bordes redondeados */
        .dropdown-menu {
            border-radius: 20px !important;
            border: 1px solid rgba(206, 176, 183, 0.2);
            box-shadow: 0 10px 30px rgba(206, 176, 183, 0.25);
            padding: 0.8rem;
            backdrop-filter: blur(10px);
            background-color: rgba(255, 255, 255, 0.95);
        }
        
        .dropdown-item {
            border-radius: 15px;
            padding: 0.7rem 1.2rem;
            margin: 0.2rem 0;
            transition: all 0.3s ease;
            color: var(--text-dark);
        }
        
        .dropdown-item:hover {
            background-color: rgba(206, 176, 183, 0.15);
            color: var(--primary-color);
            transform: translateX(5px);
        }
        
        /* Menú colapsado en móvil - Sin recuadro de fondo */
        .navbar-collapse {
            margin-top: 0.2rem;
            padding: 0.2rem;
            transition: all 0.4s ease;
        }
        
        /* Animación suave al expandir/colapsar */
        .navbar-collapse.collapsing {
            transition: height 0.35s ease, opacity 0.35s ease;
            opacity: 0.8;
        }
        
        .navbar-collapse.show {
            opacity: 1;
        }
        
        /* Animación de Pulso para Solicitar Cita */
        @keyframes pulse-soft {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
        }
        
        .btn-cita-animated {
            animation: pulse-soft 2s ease-in-out infinite;
        }
        
        .btn-primary {
            background: var(--gradient-primary);
            border: none;
            border-radius: 30px !important;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-medium);
            padding: 0.5rem 1.5rem !important;
        }
        
        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(206, 176, 183, 0.4);
            background: var(--primary-dark);
        }
        
        .btn-outline-primary {
            border: 2px solid var(--primary-color);
            color: var(--primary-color);
            border-radius: 30px !important;
            font-weight: 600;
            padding: 0.5rem 1.5rem !important;
            transition: all 0.3s ease;
        }
        
        .btn-outline-primary:hover {
            background-color: var(--primary-color);
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(206, 176, 183, 0.4);
        }
        
        /* Estilos globales para botones de formularios */
        .btn-cancelar, .btn-volver, .btn-limpiar, 
        .btn-outline-secondary:not(.btn-accion-eliminar) {
            background: white !important;
            border: 2px solid var(--primary-color) !important;
            color: var(--primary-color) !important;
            padding: 0.8rem 2rem !important;
            border-radius: 15px !important;
            font-weight: 600 !important;
            transition: all 0.3s ease !important;
            text-decoration: none !important;
            display: inline-block !important;
        }
        
        .btn-cancelar:hover, .btn-volver:hover, .btn-limpiar:hover,
        .btn-outline-secondary:not(.btn-accion-eliminar):hover {
            background: var(--primary-color) !important;
            color: white !important;
            transform: translateY(-2px) !important;
            box-shadow: 0 4px 15px {{ tema.primary }}50 !important;
        }
        
        /* Botón secundario de Bootstrap con colores del tema */
        .btn-secondary:not(.btn-eliminar):not(.btn-accion-eliminar) {
            background: var(--primary-color) !important;
            border-color: var(--primary-color) !important;
            color: white !important;
        }
        
        .btn-secondary:not(.btn-eliminar):not(.btn-accion-eliminar):hover {
            background: var(--primary-dark) !important;
            border-color: var(--primary-dark) !important;
        }
        
        /* Estilos globales para SELECT/COMBOBOX - MÁXIMA COMPATIBILIDAD */
        select, .form-select {
            border: 2px solid {{ tema.primary }}50 !important;
            border-radius: 10px !important;
            padding: 0.75rem 1rem !important;
            background-color: white !important;
            color: #1E293B !important;
            font-weight: 500 !important;
            transition: all 0.3s ease !important;
            /* Forzar apariencia nativa para mayor control */
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='{{ tema.primary | replace('#', '%23') }}' d='M6 9L1 4h10z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 1rem center;
            background-size: 12px;
            padding-right: 3rem !important;
        }
        
        select:focus, .form-select:focus {
            border-color: var(--primary-color) !important;
            box-shadow: 0 0 0 0.2rem {{ tema.primary }}25 !important;
            outline: none !important;
            background-color: #F0FDFA !important;
        }
        
        select:hover, .form-select:hover {
            border-color: var(--primary-color) !important;
            background-color: {{ tema.primary }}08 !important;
        }
        
        /* Opciones del dropdown - Estilos específicos por navegador */
        select option, .form-select option {
            background-color: white;
            color: #1E293B;
            padding: 12px 16px;
            font-weight: 500;
        }
        
        /* Firefox - Mayor control de opciones */
        @-moz-document url-prefix() {
            select option, .form-select option {
                background-color: white !important;
                color: #1E293B !important;
            }
            
            select option:hover, .form-select option:hover {
                background-color: {{ tema.primary }}15 !important;
            }
            
            select option:checked, .form-select option:checked {
                background: linear-gradient(135deg, {{ tema.primary }} 0%, {{ tema.primary_dark }} 100%) !important;
                color: white !important;
            }
        }
        
        /* Chrome/Safari - Forzar fondo blanco */
        @supports (-webkit-appearance: none) {
            select option {
                background: white;
                color: #1E293B;
            }
        }
        
        /* Placeholder del select */
        select option[value=""],
        select option[disabled],
        .form-select option[value=""],
        .form-select option[disabled] {
            color: #94A3B8 !important;
            font-style: italic !important;
            background-color: #F8FAFC !important;
        }
        
        /* Opción seleccionada actualmente */
        select option:checked {
            background: {{ tema.primary }} linear-gradient(0deg, {{ tema.primary }} 0%, {{ tema.primary }} 100%);
            color: white;
        }
        
        /* ICONOS GLOBALES - Aplicar color del tema a todos los iconos */
        
        /* Iconos en encabezados (h1, h2, h3, h4, h5) */
        h1 i, h2 i, h3 i, h4 i, h5 i,
        .facturacion-hero i, .maestra-hero i, .historico-hero i,
        .config-header i, .admin-header i {
            color: var(--primary-color) !important;
        }
        
        /* Iconos en labels de formularios */
        label i, .form-label i, .info-label i {
            color: var(--primary-color) !important;
        }
        
        /* Iconos en títulos de secciones */
        .section-title i, .seccion-titulo i {
            color: var(--primary-color) !important;
        }
        
        /* Iconos en filtros y búsquedas */
        .search-box i, .filtros-card i {
            color: var(--primary-color) !important;
        }
        
        /* Iconos en badges de estado (solo si no tienen color específico) */
        .badge i:not(.fa-exclamation-triangle):not(.fa-times):not(.fa-check) {
            color: inherit !important;
        }
        
        /* IMPORTANTE: Los iconos en botones SIEMPRE heredan el color del texto del botón */
        .btn i, .btn .fa, .btn .fas, .btn .far, .btn .fab, .btn svg {
            color: inherit !important;
        }
        
        /* Iconos en dropdowns */
        .dropdown-item i {
            color: var(--primary-color) !important;
        }
        
        /* Iconos en info boxes */
        .info-box i, .alert-info i, .info-field i {
            color: var(--primary-color) !important;
        }
        
        /* BOTONES GLOBALES - Forzar colores del tema */
        
        /* Todos los botones con clase btn que contengan "volver", "menu", "cancelar" */
        a.btn[href*="menu"], 
        a[class*="volver"],
        button[class*="volver"],
        .btn-menu,
        a[style*="ACACAD"] {
            background: white !important;
            border: 2px solid var(--primary-color) !important;
            color: var(--primary-color) !important;
        }
        
        a.btn[href*="menu"]:hover, 
        a[class*="volver"]:hover,
        button[class*="volver"]:hover,
        .btn-menu:hover,
        a[style*="ACACAD"]:hover {
            background: var(--primary-color) !important;
            color: white !important;
        }
        
        /* Forzar color de íconos en botones "Volver al Menú" */
        a.btn[href*="menu"] i,
        a.btn[href*="menu"] span {
            color: var(--primary-color) !important;
        }
        
        a.btn[href*="menu"]:hover i,
        a.btn[href*="menu"]:hover span {
            color: white !important;
        }
        
        /* TEXTOS Y FUENTES GLOBALES */
        
        /* Títulos principales siempre con color del tema */
        h1, .h1 {
            color: var(--primary-color) !important;
        }
        
        h2, .h2, h3, .h3 {
            color: var(--primary-color) !important;
        }
        
        /* Títulos en hero sections */
        .facturacion-hero h1,
        .maestra-hero h1,
        .historico-hero h1,
        .dashboard-header h1 {
            color: var(--primary-color) !important;
        }
        
        /* Textos en tarjetas del menú */
        .maestra-card h4 {
            color: var(--primary-color) !important;
        }
        
        /* Links y enlaces */
        a:not(.btn):not(.dropdown-item):not(.nav-link) {
            color: var(--primary-color) !important;
        }
        
        a:not(.btn):not(.dropdown-item):not(.nav-link):hover {
            color: var(--primary-dark) !important;
        }
        
        /* INPUTS GLOBALES - Aplicar estilos del tema */
        
        input[type="text"],
        input[type="email"],
        input[type="number"],
        input[type="date"],
        input[type="password"],
        input[type="search"],
        textarea,
        .form-control {
            border: 2px solid {{ tema.primary }}50 !important;
            border-radius: 10px !important;
            padding: 0.75rem 1rem !important;
            transition: all 0.3s ease !important;
            background-color: white !important;
        }
        
        input[type="text"]:focus,
        input[type="email"]:focus,
        input[type="number"]:focus,
        input[type="date"]:focus,
        input[type="password"]:focus,
        input[type="search"]:focus,
        textarea:focus,
        .form-control:focus {
            border-color: var(--primary-color) !important;
            box-shadow: 0 0 0 0.2rem {{ tema.primary }}25 !important;
            outline: none !important;
        }
        
        input[type="text"]:hover,
        input[type="email"]:hover,
        input[type="number"]:hover,
        input[type="date"]:hover,
        input[type="password"]:hover,
        input[type="search"]:hover,
        textarea:hover,
        .form-control:hover {
            border-color: var(--primary-color) !important;
        }
        
        /* Checkboxes y radios */
        input[type="checkbox"],
        input[type="radio"] {
            accent-color: var(--primary-color) !important;
        }
        
        /* Floating Action Buttons Base Styles */
        .float-button {
            position: fixed;
            width: 60px;
            height: 60px;
            right: 20px;
            color: white;
            border-radius: 50%;
            text-align: center;
            font-size: 28px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            z-index: 1000;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            text-decoration: none;
        }
        
        .float-button:hover {
            transform: scale(1.15) translateY(-2px);
            box-shadow: 0 6px 30px rgba(0, 0, 0, 0.4);
            color: white;
        }
        
        /* WhatsApp Button - Verde */
        .whatsapp-float {
            bottom: 20px;
            background: linear-gradient(135deg, #25d366 0%, #20ba5a 100%);
            color: white !important;
        }
        
        .whatsapp-float:hover {
            background: linear-gradient(135deg, #20ba5a 0%, #1ea952 100%);
            box-shadow: 0 6px 30px rgba(37, 211, 102, 0.5);
            color: white !important;
        }
        
        .whatsapp-float i {
            color: white !important;
        }
        
        /* Instagram Button - Gradiente Instagram */
        .instagram-float {
            bottom: 95px;
            background: linear-gradient(135deg, #833ab4 0%, #fd1d1d 50%, #fcb045 100%);
            color: white !important;
        }
        
        .instagram-float:hover {
            background: linear-gradient(135deg, #a14cc9 0%, #ff3838 50%, #ffc166 100%);
            box-shadow: 0 6px 30px rgba(253, 29, 29, 0.5);
            color: white !important;
        }
        
        .instagram-float i {
            color: white !important;
        }
        
        /* Citas Button - SILVER CHALICE */
        .citas-float {
            bottom: 170px;
            background: linear-gradient(135deg, #ACACAD 0%, #949495 100%);
            color: white !important;
        }
        
        .citas-float:hover {
            background: linear-gradient(135deg, #949495 0%, #808081 100%);
            box-shadow: 0 6px 30px rgba(172, 172, 173, 0.5);
            color: white !important;
        }
        
        .citas-float i {
            color: white !important;
        }
        
        .footer {
            background: var(--gradient-hero);
            color: white;
            padding: 3rem 0 1rem;
        }
        
        .footer h5, .footer h6 {
            color: white;
            font-weight: 600;
        }
        
        .footer .text-muted {
            color: #BDC3C7 !important;
        }
        
        .footer a {
            transition: color 0.3s ease;
        }
        
        .footer a:hover {
            color: white !important;
        }
        
        .bg-light {
            background-color: var(--secondary-color) !important;
        }
        
        .text-primary {
            color: var(--primary-color) !important;
        }
        
        .bg-primary {
            background: var(--gradient-primary) !important;
        }
        
        .alert-success {
            background-color: #E8F5E8;
            border-color: #4A90A4;
            color: #2C3E50;
        }
        
        .alert-danger {
            background-color: #FDE8E8;
            border-color: #E74C3C;
            color: #2C3E50;
        }
        
        .alert-info {
            background-color: #E8F4F8;
            border-color: #4A90A4;
            color: #2C3E50;
        }
        
        .alert-warning {
            background-color: #FFF8E8;
            border-color: #F39C12;
            color: #2C3E50;
        }
        
        /* Responsive para botones flotantes */
        @media (max-width: 768px) {
            .float-button {
                width: 55px;
                height: 55px;
                font-size: 26px;
                right: 15px;
            }
            
            .whatsapp-float {
                bottom: 15px;
            }
            
            .instagram-float {
                bottom: 85px;
            }
            
            .citas-float {
                bottom: 155px;
            }
            
            /* Navbar responsive */
            .navbar-brand span:first-child {
                font-size: 0.8rem !important;
            }
            
            .navbar-brand span:last-child {
                font-size: 0.65rem !important;
            }
            
            /* Menú en móvil - más compacto */
            .navbar-nav .nav-link {
                font-size: 0.75rem;
                padding: 0.2rem 0.4rem !important;
                margin: 0.1rem 0;
            }
            
            .navbar-collapse {
                margin-top: 0.1rem;
                padding: 0.2rem;
            }
        }
        
        @media (max-width: 576px) {
            .float-button {
                width: 50px;
                height: 50px;
                font-size: 24px;
                right: 12px;
            }
            
            .whatsapp-float {
                bottom: 12px;
            }
            
            .instagram-float {
                bottom: 75px;
            }
            
            .citas-float {
                bottom: 138px;
            }
            
            /* Navbar más pequeño en móviles */
            .navbar-brand span:first-child {
                font-size: 0.75rem !important;
            }
            
            .navbar-brand span:last-child {
                font-size: 0.6rem !important;
            }
            
            /* Menú en móvil pequeño */
            .navbar-nav .nav-link {
                font-size: 0.7rem;
                padding: 0.2rem 0.4rem !important;
            }
            
            .navbar-collapse {
                margin-top: 0.1rem;
                padding: 0.15rem;
            }
            
            .btn-cita-animated {
                font-size: 0.9rem !important;
                padding: 0.4rem 1rem !important;
            }
            
            /* Footer más compacto en móviles */
            .row.justify-content-center > .col-lg-5 {
                margin-bottom: 1rem !important;
            }
        }
        
        /* Extra pequeño - iPhone SE y similar */
        @media (max-width: 375px) {
            .navbar-brand span:first-child {
                font-size: 0.7rem !important;
            }
            
            .navbar-brand span:last-child {
                font-size: 0.55rem !important;
            }
            
            .navbar-nav .nav-link {
                font-size: 0.65rem;
                padding: 0.2rem 0.35rem !important;
            }
            
            .btn-cita-animated {
                font-size: 0.85rem !important;
                padding: 0.35rem 0.8rem !important;
            }
            
            .float-button {
                width: 45px;
                height: 45px;
                font-size: 22px;
                right: 10px;
            }
            
            .whatsapp-float {
                bottom: 10px;
            }
            
            .instagram-float {
                bottom: 68px;
            }
            
            .citas-float {
                bottom: 126px;
            }
        }
        
        /* Landscape mode para móviles - Navbar */
        @media (max-height: 500px) and (orientation: landscape) {
            .navbar {
                padding: 0.15rem 0 !important;
            }
            
            .navbar-brand span:first-child {
                font-size: 0.7rem !important;
            }
            
            .navbar-brand span:last-child {
                display: none;
            }
            
            .navbar-nav .nav-link {
                font-size: 0.65rem;
                padding: 0.2rem 0.4rem !important;
            }
            
            .btn-cita-animated {
                font-size: 0.85rem !important;
                padding: 0.35rem 0.9rem !important;
            }
        }
    </style>
    
    <!-- Bloque para scripts adicionales de páginas específicas -->
    {% block extra_head %}{% endblock %}
</head>
<body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TW8956LR"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    
    <!-- Header -->
    {% if current_user.is_authenticated %}
    <!-- Navbar para Sistema de Facturación -->
    <nav class="navbar navbar-expand-lg navbar-dark shadow-sm" style="background: linear-gradient(135deg, {{ tema.gradient_start }} 0%, {{ tema.gradient_end}} 100%); padding: 0.2rem 0;">
        <div class="container-fluid px-3">
            <a class="navbar-brand d-flex align-items-center" href="{{ url_for('facturacion_menu') }}" style="font-weight: 700; font-size: 0.85rem;">
                <i class="fas fa-file-invoice-dollar me-2" style="font-size: 0.8rem;"></i>
                {% if empresa and empresa.empresa_nombre %}
                    {{ empresa.empresa_nombre }}
                {% else %}
                    Sistema de Facturación
                {% endif %}
            </a>
            
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-label="Toggle navigation" style="padding: 0.2rem 0.4rem; font-size: 0.8rem;">
                <span class="navbar-toggler-icon"></span>
            </button>
            
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto align-items-center" style="font-size: 0.8rem;">
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('facturacion_menu') }}">
                            <i class="fas fa-home me-1" style="font-size: 0.75rem;"></i> Inicio
                        </a>
                    </li>
                    {% if current_user.perfil == 'Administrador' %}
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('admin_usuarios') }}">
                            <i class="fas fa-users-cog me-1" style="font-size: 0.75rem;"></i> Usuarios
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('admin_empresas') }}">
                            <i class="fas fa-building me-1" style="font-size: 0.75rem;"></i> Empresas
                        </a>
                    </li>
                    {% endif %}
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="userDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="fas fa-user-circle me-1" style="font-size: 0.75rem;"></i> {{ current_user.nombre }}
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">
                            <li><h6 class="dropdown-header">{{ current_user.email }}</h6></li>
                            <li><span class="dropdown-item-text"><small>Perfil: {{ current_user.perfil }}</small></span></li>
                            {% if empresa and empresa.empresa_nombre %}
                            <li><span class="dropdown-item-text"><small><i class="fas fa-building me-1"></i>{{ empresa.empresa_nombre }}</small></span></li>
                            {% endif %}
                            <li><hr class="dropdown-divider"></li>
                            <li>
                                <a class="dropdown-item" href="{{ url_for('perfil_configuracion') }}">
                                    <i class="fas fa-palette me-2"></i> Personalizar Tema
                                </a>
                            </li>
                            <li>
                                <a class="dropdown-item text-danger" href="{{ url_for('logout') }}">
                                    <i class="fas fa-sign-out-alt me-2"></i> Cerrar Sesión
                                </a>
                            </li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    {% endif %}

    <!-- Flash Messages -->
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <div class="container mt-3">
                {% for category, message in messages %}
                    <div class="alert alert-{{ 'danger' if category == 'error' else category }} alert-dismissible fade show" role="alert">
                        {{ message }}
                        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                    </div>
                {% endfor %}
            </div>
        {% endif %}
    {% endwith %}

    <!-- Main Content -->
    <main>
        {% block content %}{% endblock %}
    </main>

    <!-- Footer - Solo visible si NO está autenticado -->
    {% if not current_user.is_authenticated %}
    <footer class="text-light py-4 mt-5" style="background-color: rgba(255, 255, 255, 0.8); backdrop-filter: blur(10px); color: var(--text-dark);">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-5 col-md-6 mb-3">
                    <!-- Seguros Médicos -->
                    <div class="p-2 h-100" style="background: rgba(206, 176, 183, 0.1); border-radius: 10px; border-left: 4px solid var(--primary-color);">
                        <h6 class="text-primary mb-2" style="font-weight: 700; font-size: 0.9rem;">
                            <i class="fas fa-shield-alt me-2"></i>
                            Trabajamos con los Principales Seguros Médicos
                        </h6>
                        <div class="row g-1">
                            <div class="col-6 col-sm-4">
                                <div class="d-flex align-items-center">
                                    <i class="fas fa-check-circle text-primary me-1" style="font-size: 0.75rem;"></i>
                                    <span class="text-muted" style="font-size: 0.85rem;">Universal</span>
                                </div>
                            </div>
                            <div class="col-6 col-sm-4">
                                <div class="d-flex align-items-center">
                                    <i class="fas fa-check-circle text-primary me-1" style="font-size: 0.75rem;"></i>
                                    <span class="text-muted" style="font-size: 0.85rem;">Reservas</span>
                                </div>
                            </div>
                            <div class="col-6 col-sm-4">
                                <div class="d-flex align-items-center">
                                    <i class="fas fa-check-circle text-primary me-1" style="font-size: 0.75rem;"></i>
                                    <span class="text-muted" style="font-size: 0.85rem;">Humano ARS</span>
                                </div>
                            </div>
                            <div class="col-6 col-sm-4">
                                <div class="d-flex align-items-center">
                                    <i class="fas fa-check-circle text-primary me-1" style="font-size: 0.75rem;"></i>
                                    <span class="text-muted" style="font-size: 0.85rem;">Primera</span>
                                </div>
                            </div>
                            <div class="col-6 col-sm-4">
                                <div class="d-flex align-items-center">
                                    <i class="fas fa-check-circle text-primary me-1" style="font-size: 0.75rem;"></i>
                                    <span class="text-muted" style="font-size: 0.85rem;">Mapfre</span>
                                </div>
                            </div>
                            <div class="col-6 col-sm-4">
                                <div class="d-flex align-items-center">
                                    <i class="fas fa-check-circle text-primary me-1" style="font-size: 0.75rem;"></i>
                                    <span class="text-muted" style="font-size: 0.85rem;">Futuro</span>
                                </div>
                            </div>
                            <div class="col-6 col-sm-4">
                                <div class="d-flex align-items-center">
                                    <i class="fas fa-check-circle text-primary me-1" style="font-size: 0.75rem;"></i>
                                    <span class="text-muted" style="font-size: 0.85rem;">Senasa</span>
                                </div>
                            </div>
                            <div class="col-6 col-sm-4">
                                <div class="d-flex align-items-center">
                                    <i class="fas fa-check-circle text-primary me-1" style="font-size: 0.75rem;"></i>
                                    <span class="text-muted" style="font-size: 0.85rem;">Monumental</span>
                                </div>
                            </div>
                            <div class="col-6 col-sm-4">
                                <div class="d-flex align-items-center">
                                    <i class="fas fa-check-circle text-primary me-1" style="font-size: 0.75rem;"></i>
                                    <span class="text-muted" style="font-size: 0.85rem;">Semma</span>
                                </div>
                            </div>
                            <div class="col-6 col-sm-4">
                                <div class="d-flex align-items-center">
                                    <i class="fas fa-check-circle text-primary me-1" style="font-size: 0.75rem;"></i>
                                    <span class="text-muted" style="font-size: 0.85rem;">Renacer</span>
                                </div>
                            </div>
                            <div class="col-6 col-sm-4">
                                <div class="d-flex align-items-center">
                                    <i class="fas fa-check-circle text-primary me-1" style="font-size: 0.75rem;"></i>
                                    <span class="text-muted" style="font-size: 0.85rem;">APS</span>
                                </div>
                            </div>
                            <div class="col-6 col-sm-4">
                                <div class="d-flex align-items-center">
                                    <i class="fas fa-check-circle text-primary me-1" style="font-size: 0.75rem;"></i>
                                    <span class="text-muted" style="font-size: 0.85rem;">Asemap</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="col-lg-5 col-md-6 mb-3">
                    <!-- Contacto -->
                    <div class="p-2 h-100" style="background: rgba(206, 176, 183, 0.1); border-radius: 10px; border-left: 4px solid var(--primary-color);">
                        <h6 class="text-primary mb-2" style="font-weight: 700; font-size: 0.9rem;">
                            <i class="fas fa-phone-alt me-2"></i>
                            Contacto
                        </h6>
                        <div>
                            <p class="text-muted mb-2" style="font-size: 0.85rem; line-height: 1.3;">
                                <i class="fas fa-map-marker-alt me-2"></i>
                                <a href="https://www.google.com/maps/place/Centro+Oriental+de+Ginecolog%C3%ADa+y+Obstetricia/@18.4975225,-69.8651385,17z/data=!3m1!4b1!4m6!3m5!1s0x8eaf887e90af3bd9:0x5a34a05877ad0b13!8m2!3d18.4975225!4d-69.8651385!16s%2Fg%2F1tcx2l68?entry=ttu&g_ep=EgoyMDI1MTAwOC4wIKXMDSoASAFQAw%3D%3D" 
                                   target="_blank" 
                                   rel="noopener noreferrer" 
                                   class="text-muted text-decoration-none">
                                    Centro Oriental de Ginecología y Obstetricia, Zona Oriental, República Dominicana
                                </a>
                            </p>
                            <p class="text-muted mb-2" style="font-size: 0.85rem;">
                                <i class="fas fa-phone me-2"></i>
                                <a href="tel:+18297405073" class="text-muted text-decoration-none">(829) 740-5073</a>
                            </p>
                            <p class="text-muted mb-0" style="font-size: 0.85rem;">
                                <i class="fas fa-envelope me-2"></i>
                                <a href="mailto:dra.ramirezr@gmail.com" class="text-muted text-decoration-none">dra.ramirezr@gmail.com</a>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
            
            <hr class="my-3">
            
            <div class="row align-items-center">
                <div class="col-md-12 text-center">
                    <p class="text-muted mb-0" style="font-size: 0.85rem;">
                        &copy; 2025 Dra. Shirley Ramírez. Todos los derechos reservados.
                    </p>
                </div>
            </div>
        </div>
    </footer>
    {% endif %}

    <!-- Floating Action Buttons - Solo visibles si NO está autenticado -->
    {% if not current_user.is_authenticated %}
    <!-- WhatsApp Button -->
    <a href="https://wa.me/18297405073?text=Hola,%20me%20gustaría%20solicitar%20una%20cita" 
       class="float-button whatsapp-float" 
       target="_blank" 
       rel="noopener noreferrer"
       title="WhatsApp">
        <i class="fab fa-whatsapp"></i>
    </a>

    <!-- Instagram Button -->
    <a href="https://www.instagram.com/dra.ramirezr/" 
       class="float-button instagram-float" 
       target="_blank" 
       rel="noopener noreferrer"
       title="Instagram">
        <i class="fab fa-instagram"></i>
    </a>

    <!-- Citas Button -->
    <a href="{{ url_for('request_appointment') }}" 
       class="float-button citas-float"
       title="Solicitar Cita">
        <i class="fas fa-calendar-plus"></i>
    </a>
    {% endif %}

    <!-- JavaScript - Carga optimizada con defer para máxima velocidad -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" defer></script>
    
    <!-- Script de optimización de rendimiento -->
    <script src="{{ url_for('static', filename='js/performance.js') }}?v=2" defer></script>
    
    <!-- Auto-hide flash messages después de 5 segundos -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Obtener todos los mensajes flash (alertas)
            const alerts = document.querySelectorAll('.alert.alert-dismissible');
            
            alerts.forEach(function(alert) {
                // Cerrar automáticamente después de 5 segundos
                setTimeout(function() {
                    const bsAlert = new bootstrap.Alert(alert);
                    bsAlert.close();
                }, 5000);
            });
        });
    </script>
    
    <!-- Loader removido para carga instantánea -->
</body>
</html>
